<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AqiveLife - 狀態追蹤</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入共用樣式和頁面特定樣式 -->
    <link rel="stylesheet" href="assets/css/shared.css">
    <link rel="stylesheet" href="assets/css/pages/tracking.css">
    <!-- 引入共用腳本和頁面特定腳本 -->
    <script src="assets/js/shared.js" defer></script>
    <script src="assets/js/pages/tracking.js" defer></script>
    <style>
        /* 添加底部導航欄所需的樣式 */
        .tracking-content {
            padding-bottom: 70px; /* 為底部導航欄留出空間 */
            padding: 20px 20px 70px 20px;
        }
        
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-color: white;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            height: 100%;
            text-decoration: none;
            color: #777;
            transition: color 0.3s;
        }
        
        .tab-item.active {
            color: #FF9D4D;
        }
        
        .tab-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .tab-label {
            font-size: 12px;
        }
        
        /* 新增歷史記錄卡片樣式 */
        .history-cards {
            margin-top: 20px;
        }
        
        .history-card {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .history-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .history-date {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .history-mode {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }
        
        .history-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            color: #666;
        }
        
        .stat-item i {
            color: #FF9D4D;
        }
        
        .history-note {
            font-size: 14px;
            color: #444;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .section-actions {
            display: flex;
            align-items: center;
        }
        
        .filter-btn {
            background: none;
            border: none;
            color: #666;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s;
        }
        
        .filter-btn:hover {
            color: #FF9D4D;
        }
        
        /* 更新行事曆樣式 */
        .calendar-section {
            background: #FFFFFF;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .month-nav-btn {
            background: none;
            border: none;
            color: #666;
            font-size: 16px;
            cursor: pointer;
            padding: 5px 10px;
            transition: color 0.2s;
        }
        
        .month-nav-btn:hover {
            color: #FF9D4D;
        }
        
        .current-month {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            margin-bottom: 10px;
        }
        
        .calendar-weekdays div {
            font-size: 14px;
            color: #666;
            padding: 5px;
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #333;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .calendar-day:hover {
            background-color: rgba(255, 157, 77, 0.1);
        }
        
        .calendar-day.other-month {
            color: #CCC;
        }
        
        .calendar-day.has-data::after {
            content: '';
            position: absolute;
            bottom: 2px;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #FF9D4D;
        }
        
        .calendar-day.active {
            background-color: #FF9D4D;
            color: white;
        }
        
        .calendar-day.active::after {
            background-color: white;
        }
        
        /* 提示説明 */
        .calendar-hint {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
            font-size: 12px;
            color: #666;
        }
        
        .hint-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: #FF9D4D;
        }
        
        /* 數據統計區域樣式 */
        .stats-section {
            margin: 20px 0;
            background: #FFFFFF;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }
        
        @media (max-width: 480px) {
            .stats-cards {
                grid-template-columns: 1fr;
            }
        }
        
        .stats-card {
            background: #F9F9F9;
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
        }
        
        .stats-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .stats-value {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stats-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .stats-trend {
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }
        
        .stats-trend.up {
            color: #4CAF50;
        }
        
        .stats-trend.down {
            color: #F44336;
        }
        
        .weekly-goal {
            margin-top: 5px;
        }
        
        .goal-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 3px;
            display: block;
        }
        
        .goal-progress {
            height: 4px;
            background-color: #EEE;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .goal-bar {
            height: 100%;
            background-color: #FF9D4D;
        }
        
        /* 今日打卡區域樣式 */
        .today-checkin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to right, #FFEDD9, #FFEFD9);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .checkin-status {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .checkin-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .checkin-icon.completed {
            color: #4CAF50;
        }
        
        .checkin-icon.pending {
            color: #FFC107;
        }
        
        .checkin-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        
        .checkin-time {
            font-size: 12px;
            color: #666;
        }
        
        .streak-display {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.6);
            padding: 8px 12px;
            border-radius: 20px;
        }
        
        .streak-count {
            font-size: 16px;
            font-weight: 700;
            color: #333;
        }
        
        .streak-label {
            font-size: 12px;
            color: #666;
        }
        
        .streak-fire {
            color: #FF9D4D;
            font-size: 16px;
            animation: flicker 1.5s infinite alternate;
        }
        
        @keyframes flicker {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* 即時成就樣式 */
        .daily-achievements {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        @media (max-width: 480px) {
            .daily-achievements {
                grid-template-columns: 1fr;
            }
        }
        
        .daily-achievement-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #FFFFFF;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        .achievement-progress-ring {
            position: relative;
            width: 60px;
            height: 60px;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle-bg {
            stroke-opacity: 0.2;
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .history-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px; /* 調整間距 */
        }

        .edit-history-btn {
            background: none;
            border: none;
            color: #FF9D4D; /* 主題橙色 */
            font-size: 16px; /* 圖標大小 */
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s;
        }

        .edit-history-btn:hover {
            color: #E68A40; /* 深一點的橙色 */
        }
        
        .history-note {
            /* ... existing styles ... */
            max-height: 60px; /* 限制初始顯示高度 */
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3; /* 顯示最多3行 */
            -webkit-box-orient: vertical;
        }

        /* 模態框樣式 */
        .modal {
            display: none; /* 預設隱藏 */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* 防止整個頁面滾動 */
            background-color: rgba(0,0,0,0.6); /* 半透明背景 */
            align-items: center; /* 垂直居中 */
            justify-content: center; /* 水平居中 */
        }

        .modal-content {
            background-color: #fff;
            margin: 10px auto;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 500px;
            max-height: 85vh; /* 限制最大高度為視口高度的85% */
            overflow-y: auto; /* 內容過多時可滾動 */
            animation: slideInModal 0.3s ease-out;
        }

        @keyframes slideInModal {
            from {
                transform: translateY(-30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .close-modal-btn {
            background: none;
            border: none;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            padding: 0 5px;
        }

        .close-modal-btn:hover {
            color: #333;
        }

        .modal-body .form-group {
            margin-bottom: 15px;
        }

        .modal-body .form-group label {
            display: block;
            font-size: 14px;
            color: #555;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .modal-body .form-group p {
            font-size: 15px;
            color: #333;
            background-color: #f9f9f9;
            padding: 8px 12px;
            border-radius: 8px;
        }
        
        .modal-body .notes-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 15px;
            line-height: 1.6;
            resize: vertical; /* 允許垂直調整大小 */
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            margin-top: 15px;
            position: sticky; /* 確保按鈕在滾動時始終可見 */
            bottom: 0;
            background-color: #fff;
        }

        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            white-space: nowrap; /* 防止按鈕文字換行 */
        }

        .btn-primary {
            background-color: #FF9D4D;
            color: white;
        }

        .btn-primary:hover {
            background-color: #E68A40;
        }

        .btn-secondary {
            background-color: #E0E0E0;
            color: #333;
        }

        .btn-secondary:hover {
            background-color: #C7C7C7;
        }

        /* 標題與今日記錄按鈕 */
        .tracking-header {
            margin-bottom: 20px;
        }
        
        .today-record-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #FF9D4D;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-right: 10px;
        }
        
        .today-record-btn:hover {
            background-color: #E68A40;
        }
        
        .section-actions {
            display: flex;
            align-items: center;
        }
        
        /* 歷史記錄區域 */
        .history-section {
            margin: 25px 0;
        }
        
        /* 模式選擇器 */
        .mode-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 5px;
        }
        
        .mode-option {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            background-color: #F5F5F5;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .mode-option:hover {
            background-color: #EBEBEB;
        }
        
        .mode-option input {
            margin: 0;
        }
        
        .mode-option input:checked + .mode-name {
            font-weight: 600;
            color: #FF9D4D;
        }
        
        /* 控制度UI */
        .control-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .control-header span {
            font-size: 18px;
            font-weight: 600;
            color: #FF9D4D;
        }
        
        /* 改進滑桿樣式 */
        .tracking-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #E0E0E0;
            outline: none;
            margin: 15px 0 5px 0;
        }
        
        .tracking-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #FF9D4D;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .tracking-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #FF9D4D;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* 滑桿標籤改進 */
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 14px;
            color: #666;
        }
        
        /* 統一所有標題樣式 */
        .section-title-main {
            font-size: 20px;
            font-weight: 600;
            margin-left: 0;
            margin-bottom: 0;
            padding-left: 0;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        /* 修正數據統計區域標題 */
        .stats-section {
            margin: 25px 0;
            background: #FFFFFF;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        }
        
        /* 修正成就區域標題 */
        .achievements-section {
            margin: 25px 0;
        }
        
        /* 修正週目標文本對齊 */
        .weekly-goal {
            margin-top: 5px;
            text-align: center;
        }
        
        /* 修正練習時長選擇器樣式 */
        .select-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
            max-width: 150px;
        }
        
        .duration-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 100%;
            padding: 10px 35px 10px 15px;
            border: 1px solid #E0E0E0;
            border-radius: 12px;
            font-size: 15px;
            background-color: #FFFFFF;
            cursor: pointer;
        }
        
        .select-arrow {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            pointer-events: none;
        }
        
        .custom-duration-input {
            padding: 10px 15px;
            border: 1px solid #E0E0E0;
            border-radius: 12px;
            width: 100px;
            font-size: 15px;
            text-align: center;
        }
        
        /* 修正覺醒日誌輸入框樣式 */
        .journal-textarea {
            width: 100%;
            min-height: 100px;
            max-height: 150px; /* 限制最大高度 */
            padding: 12px 15px;
            border: 1px solid #E0E0E0;
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.6;
            resize: vertical;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            transition: border 0.2s ease;
            background-color: #FFFFFF;
            margin-top: 5px;
            box-sizing: border-box; /* 確保內邊距包含在寬度內 */
        }
        
        .journal-textarea:focus {
            border-color: #FF9D4D;
            outline: none;
        }

        /* 為模態框中的輸入框添加特殊處理 */
        #modalRecordNote {
            max-height: 120px;
            overflow-y: auto; /* 當內容過多時啟用垂直滾動 */
        }

        /* 優化模態框在小螢幕上的顯示 */
        @media (max-width: 480px) {
            .modal-content {
                width: 95%;
                padding: 15px;
                margin: 5px auto;
                max-height: 90vh;
            }
        }
    </style>
</head>
<body>
    <!-- iOS 狀態欄 -->
    <div class="status-bar">
        <div class="status-bar-left">
            <div class="status-bar-time">9:41</div>
        </div>
        <div class="status-bar-right">
            <div class="status-bar-signal">
                <i class="fas fa-signal"></i>
            </div>
            <div class="status-bar-wifi">
                <i class="fas fa-wifi"></i>
            </div>
            <div class="status-bar-battery">
                <i class="fas fa-battery-full"></i>
            </div>
        </div>
    </div>
    
    <!-- 應用欄 -->
    <div class="app-bar">
        <a href="home.html" class="back-button">
            <i class="fas fa-arrow-left"></i>
        </a>
        <div class="app-title">狀態追蹤</div>
        <div class="app-bar-action"></div>
    </div>

    <!-- 追蹤內容 -->
    <div class="tracking-content">
        <!-- 標題與今日記錄按鈕 -->
        <div class="tracking-header">
            <div class="section-header">
                <div class="section-title section-title-main">能力覺醒日誌</div>
                <div class="section-actions">
                    <button class="today-record-btn" id="todayRecordBtn">
                        <i class="fas fa-plus-circle"></i>
                        <span>今日記錄</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 行事曆部分 - 簡化 -->
        <div class="calendar-section">
            <div class="calendar-header">
                <button class="month-nav-btn" id="prev-month">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="current-month" id="current-month">2025年4月</div>
                <button class="month-nav-btn" id="next-month">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="calendar-weekdays">
                <div>一</div>
                <div>二</div>
                <div>三</div>
                <div>四</div>
                <div>五</div>
                <div>六</div>
                <div>日</div>
            </div>
            <div class="calendar-days">
                <div class="calendar-day other-month">31</div>
                <div class="calendar-day">1</div>
                <div class="calendar-day">2</div>
                <div class="calendar-day has-data">3</div>
                <div class="calendar-day">4</div>
                <div class="calendar-day">5</div>
                <div class="calendar-day">6</div>
                
                <div class="calendar-day has-data">7</div>
                <div class="calendar-day">8</div>
                <div class="calendar-day">9</div>
                <div class="calendar-day">10</div>
                <div class="calendar-day">11</div>
                <div class="calendar-day has-data">12</div>
                <div class="calendar-day">13</div>
                
                <div class="calendar-day">14</div>
                <div class="calendar-day">15</div>
                <div class="calendar-day">16</div>
                <div class="calendar-day active has-data">17</div>
                <div class="calendar-day has-data">18</div>
                <div class="calendar-day">19</div>
                <div class="calendar-day">20</div>
                
                <div class="calendar-day">21</div>
                <div class="calendar-day">22</div>
                <div class="calendar-day">23</div>
                <div class="calendar-day">24</div>
                <div class="calendar-day has-data">25</div>
                <div class="calendar-day">26</div>
                <div class="calendar-day">27</div>
                
                <div class="calendar-day">28</div>
                <div class="calendar-day">29</div>
                <div class="calendar-day">30</div>
                <div class="calendar-day other-month">1</div>
                <div class="calendar-day other-month">2</div>
                <div class="calendar-day other-month">3</div>
                <div class="calendar-day other-month">4</div>
            </div>
            <div class="calendar-hint">
                <div class="hint-dot"></div>
                <span>標記表示有記錄</span>
            </div>
        </div>
        
        <!-- 歷史記錄卡片區域 -->
        <div class="history-section">
            <div class="section-header">
                <div class="section-title section-title-main">近期記錄</div>
            </div>
            
            <div class="history-cards">
                <div class="history-card" data-record-id="1" data-date="2025/04/17">
                    <div class="history-card-header">
                        <div class="history-date">2025/04/17</div>
                        <button class="edit-history-btn" aria-label="編輯此記錄">
                            <i class="fas fa-pencil-alt"></i>
                        </button>
                    </div>
                    <div class="history-mode">氣定神閒模式</div>
                    <div class="history-stats">
                        <div class="stat-item">
                            <i class="fas fa-brain"></i>
                            <span>控制度: 8</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span>時長: 3分鐘</span>
                        </div>
                    </div>
                    <div class="history-note">
                        今天練習後感覺特別平靜，能夠更好地控制自己的情緒...
                    </div>
                </div>
                
                <div class="history-card" data-record-id="2" data-date="2025/04/16">
                    <div class="history-card-header">
                        <div class="history-date">2025/04/16</div>
                        <button class="edit-history-btn" aria-label="編輯此記錄">
                            <i class="fas fa-pencil-alt"></i>
                        </button>
                    </div>
                    <div class="history-mode">專注平靜模式</div>
                    <div class="history-stats">
                        <div class="stat-item">
                            <i class="fas fa-brain"></i>
                            <span>控制度: 7</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span>時長: 3分鐘</span>
                        </div>
                    </div>
                    <div class="history-note">
                        工作時注意力明顯提升，能夠更專注於當下任務...
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 數據統計區域 -->
        <div class="stats-section">
            <div class="section-header">
                <div class="section-title section-title-main">本週練習概覽</div>
            </div>
            
            <div class="stats-cards">
                <div class="stats-card">
                    <div class="stats-value">5</div>
                    <div class="stats-label">本週練習次數</div>
                    <div class="stats-trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span>較上週 +2</span>
                    </div>
                </div>
                
                <div class="stats-card">
                    <div class="stats-value">78%</div>
                    <div class="stats-label">本週平均控制度</div>
                    <div class="stats-trend up">
                        <i class="fas fa-arrow-up"></i>
                        <span>較上週 +3%</span>
                    </div>
                </div>
                
                <div class="stats-card">
                    <div class="stats-value">15</div>
                    <div class="stats-label">連續練習天數</div>
                    <div class="weekly-goal">
                        <span class="goal-label">週目標: 7天</span>
                        <div class="goal-progress">
                            <div class="goal-bar" style="width: 71%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 今日打卡區域 -->
            <div class="today-checkin">
                <div class="checkin-status">
                    <div class="checkin-icon completed">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="checkin-text">
                        <div class="checkin-title">今日已完成練習</div>
                        <div class="checkin-time">完成於 14:30</div>
                    </div>
                </div>
                <div class="streak-display">
                    <div class="streak-count">15天</div>
                    <div class="streak-label">連續練習</div>
                    <div class="streak-fire">
                        <i class="fas fa-fire"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 成就展示調整為即時激勵 -->
        <div class="achievements-section">
            <div class="section-header">
                <div class="section-title section-title-main">即時成就</div>
            </div>
            
            <div class="daily-achievements">
                <div class="daily-achievement-item">
                    <div class="achievement-progress-ring">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring-circle-bg" stroke="#eee" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                            <circle class="progress-ring-circle" stroke="#FF9D4D" stroke-width="4" fill="transparent" r="26" cx="30" cy="30" 
                                    stroke-dasharray="163.36" stroke-dashoffset="40.84"/>
                        </svg>
                        <div class="progress-text">75%</div>
                    </div>
                    <div class="achievement-info">
                        <div class="achievement-title">今日專注度</div>
                        <div class="achievement-desc">較昨天提升10%</div>
                    </div>
                </div>
                
                <div class="daily-achievement-item">
                    <div class="achievement-progress-ring">
                        <svg class="progress-ring" width="60" height="60">
                            <circle class="progress-ring-circle-bg" stroke="#eee" stroke-width="4" fill="transparent" r="26" cx="30" cy="30"/>
                            <circle class="progress-ring-circle" stroke="#4CAF50" stroke-width="4" fill="transparent" r="26" cx="30" cy="30" 
                                    stroke-dasharray="163.36" stroke-dashoffset="16.34"/>
                        </svg>
                        <div class="progress-text">90%</div>
                    </div>
                    <div class="achievement-info">
                        <div class="achievement-title">本週目標達成</div>
                        <div class="achievement-desc">再練習1次達成目標</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 底部導航欄 -->
    <div class="tab-bar">
        <a href="home.html" class="tab-item">
            <div class="tab-icon">
                <i class="fas fa-home"></i>
            </div>
            <div class="tab-label">首頁</div>
        </a>
        <a href="tracking.html" class="tab-item active">
            <div class="tab-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="tab-label">記錄</div>
        </a>
        <a href="stats.html" class="tab-item">
            <div class="tab-icon">
                <i class="fas fa-chart-pie"></i>
            </div>
            <div class="tab-label">數據</div>
        </a>
        <a href="settings.html" class="tab-item">
            <div class="tab-icon">
                <i class="fas fa-cog"></i>
            </div>
            <div class="tab-label">設定</div>
        </a>
    </div>

    <!-- 編輯記錄模態框 -->
    <div id="editRecordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="editModalTitle">編輯記錄</h3>
                <button class="close-modal-btn" aria-label="關閉模態框">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group record-date">
                    <label>日期：</label>
                    <p id="modalRecordDate">-</p>
                </div>
                
                <!-- 筆記記錄區域 -->
                <div class="form-group">
                    <label for="modalRecordNote">能力覺醒日誌：</label>
                    <textarea id="modalRecordNote" class="notes-input journal-textarea" rows="4" style="height: 100px; max-height: 120px;" placeholder="記錄您的感受和想法..."></textarea>
                </div>
                
                <!-- 選擇練習模式 -->
                <div class="form-group">
                    <label>練習模式：</label>
                    <div class="mode-selector">
                        <label class="mode-option">
                            <input type="radio" name="practiceMode" value="氣定神閒模式" checked>
                            <span class="mode-name">氣定神閒模式</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="practiceMode" value="專注平靜模式">
                            <span class="mode-name">專注平靜模式</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="practiceMode" value="一夜好眠模式">
                            <span class="mode-name">一夜好眠模式</span>
                        </label>
                    </div>
                </div>
                
                <!-- 氣定神閒控制度 -->
                <div class="form-group">
                    <div class="control-header">
                        <label>氣定神閒控制度：</label>
                        <span id="anxiety-value-modal">5</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="5" class="tracking-slider" id="anxiety-slider-modal">
                        <div class="slider-labels">
                            <span>焦慮</span>
                            <span></span>
                            <span>極度平靜</span>
                        </div>
                    </div>
                </div>
                
                <!-- 專注平靜控制度 -->
                <div class="form-group">
                    <div class="control-header">
                        <label>專注平靜控制度：</label>
                        <span id="focus-value-modal">5</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="5" class="tracking-slider" id="focus-slider-modal">
                        <div class="slider-labels">
                            <span>分散</span>
                            <span></span>
                            <span>高度專注</span>
                        </div>
                    </div>
                </div>
                
                <!-- 一夜好眠控制度 -->
                <div class="form-group">
                    <div class="control-header">
                        <label>一夜好眠控制度：</label>
                        <span id="sleep-value-modal">5</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="1" max="10" value="5" class="tracking-slider" id="sleep-slider-modal">
                        <div class="slider-labels">
                            <span>不佳</span>
                            <span></span>
                            <span>優質</span>
                        </div>
                    </div>
                </div>
                
                <!-- 練習時長 -->
                <div class="form-group">
                    <label>練習時長：</label>
                    <div class="select-wrapper">
                        <select id="practice-duration" class="duration-select">
                            <option value="3">3分鐘</option>
                            <option value="5">5分鐘</option>
                            <option value="10">10分鐘</option>
                            <option value="15">15分鐘</option>
                            <option value="custom">其他</option>
                        </select>
                        <i class="fas fa-chevron-down select-arrow"></i>
                    </div>
                    <div id="custom-duration-container" style="display:none; margin-top:10px;">
                        <input type="number" id="custom-duration" min="1" max="60" value="3" class="custom-duration-input">
                        <span>分鐘</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveRecordChangesBtn" class="btn btn-primary">儲存變更</button>
                <button id="cancelEditBtn" class="btn btn-secondary">取消</button>
            </div>
        </div>
    </div>

<script>
    // 當頁面載入完成時執行
    document.addEventListener('DOMContentLoaded', function() {
        // 獲取模態框和按鈕元素
        const modal = document.getElementById('editRecordModal');
        const closeBtn = document.querySelector('.close-modal-btn');
        const cancelBtn = document.getElementById('cancelEditBtn');
        const saveBtn = document.getElementById('saveRecordChangesBtn');
        const todayBtn = document.getElementById('todayRecordBtn');
        const editBtns = document.querySelectorAll('.edit-history-btn');
        const calendarDays = document.querySelectorAll('.calendar-day');
        
        // 模態框內的滑桿和值顯示
        const anxietySlider = document.getElementById('anxiety-slider-modal');
        const anxietyValue = document.getElementById('anxiety-value-modal');
        const focusSlider = document.getElementById('focus-slider-modal');
        const focusValue = document.getElementById('focus-value-modal');
        const sleepSlider = document.getElementById('sleep-slider-modal');
        const sleepValue = document.getElementById('sleep-value-modal');
        
        // 練習時長選擇相關
        const durationSelect = document.getElementById('practice-duration');
        const customDurationContainer = document.getElementById('custom-duration-container');
        
        // 練習模式切換相關
        const modeRadios = document.querySelectorAll('input[name="practiceMode"]');
        
        // 用於記錄當前正在編輯的記錄ID
        let currentEditingRecordId = null;
        let isNewRecord = false;
        
        // 今日記錄按鈕點擊事件
        todayBtn.addEventListener('click', function() {
            const today = new Date();
            const dateString = `${today.getFullYear()}/${String(today.getMonth() + 1).padStart(2, '0')}/${String(today.getDate()).padStart(2, '0')}`;
            
            document.getElementById('editModalTitle').textContent = '今日記錄';
            document.getElementById('modalRecordDate').textContent = dateString;
            
            // 清空或設置為默認值
            document.getElementById('modalRecordNote').value = '';
            anxietySlider.value = 5;
            anxietyValue.textContent = 5;
            focusSlider.value = 5;
            focusValue.textContent = 5;
            sleepSlider.value = 5;
            sleepValue.textContent = 5;
            durationSelect.value = '3';
            customDurationContainer.style.display = 'none';
            
            // 檢查是否已經有今日的記錄
            const existingTodayCards = document.querySelectorAll(`.history-card[data-date="${dateString}"]`);
            if (existingTodayCards.length > 0) {
                // 如果已有今天的記錄，設置為編輯該記錄
                currentEditingRecordId = existingTodayCards[0].dataset.recordId;
                isNewRecord = false;
                
                // 獲取該記錄的數據並填充表單
                const card = existingTodayCards[0];
                const note = card.querySelector('.history-note').textContent.trim();
                const mode = card.querySelector('.history-mode').textContent;
                const controlText = card.querySelector('.stat-item:nth-child(1) span').textContent;
                const control = parseInt(controlText.split(': ')[1]);
                const durationText = card.querySelector('.stat-item:nth-child(2) span').textContent;
                const duration = parseInt(durationText.split(': ')[1]);
                
                document.getElementById('modalRecordNote').value = note;
                
                // 設置練習模式
                modeRadios.forEach(radio => {
                    if (radio.value === mode) {
                        radio.checked = true;
                    }
                });
                
                // 設置控制度
                anxietySlider.value = control;
                anxietyValue.textContent = control;
                focusSlider.value = control;
                focusValue.textContent = control;
                sleepSlider.value = control;
                sleepValue.textContent = control;
                
                // 設置時長
                if ([3, 5, 10, 15].includes(duration)) {
                    durationSelect.value = duration.toString();
                    customDurationContainer.style.display = 'none';
                } else {
                    durationSelect.value = 'custom';
                    document.getElementById('custom-duration').value = duration;
                    customDurationContainer.style.display = 'block';
                }
            } else {
                // 如果沒有今天的記錄，設置為新建記錄
                currentEditingRecordId = 'new_' + Date.now();
                isNewRecord = true;
                
                // 重置表單為默認值
                resetModalForm();
            }
            
            // 顯示模態框
            modal.style.display = 'flex';
        });
        
        // 編輯歷史記錄按鈕點擊事件
        function attachEditButtonEvents() {
            document.querySelectorAll('.edit-history-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation(); // 防止事件冒泡
                    
                    const card = this.closest('.history-card');
                    const recordId = card.dataset.recordId;
                    const date = card.dataset.date;
                    
                    // 設置當前編輯的記錄ID
                    currentEditingRecordId = recordId;
                    isNewRecord = false;
                    
                    // 獲取該記錄的數據
                    const mode = card.querySelector('.history-mode').textContent;
                    const controlText = card.querySelector('.stat-item:nth-child(1) span').textContent;
                    const control = parseInt(controlText.split(': ')[1]);
                    const durationText = card.querySelector('.stat-item:nth-child(2) span').textContent;
                    const duration = parseInt(durationText.split(': ')[1]);
                    const note = card.querySelector('.history-note').textContent.trim();
                    
                    // 更新模態框內容
                    document.getElementById('editModalTitle').textContent = '編輯記錄';
                    document.getElementById('modalRecordDate').textContent = date;
                    document.getElementById('modalRecordNote').value = note;
                    
                    // 設置練習模式
                    modeRadios.forEach(radio => {
                        if (radio.value === mode) {
                            radio.checked = true;
                        }
                    });
                    
                    // 設置控制度
                    anxietySlider.value = control;
                    anxietyValue.textContent = control;
                    focusSlider.value = control;
                    focusValue.textContent = control;
                    sleepSlider.value = control;
                    sleepValue.textContent = control;
                    
                    // 設置時長
                    if ([3, 5, 10, 15].includes(duration)) {
                        durationSelect.value = duration.toString();
                        customDurationContainer.style.display = 'none';
                    } else {
                        durationSelect.value = 'custom';
                        document.getElementById('custom-duration').value = duration;
                        customDurationContainer.style.display = 'block';
                    }
                    
                    // 顯示模態框
                    modal.style.display = 'flex';
                });
            });
        }
        
        // 初始化編輯按鈕事件
        attachEditButtonEvents();
        
        // 點擊行事曆日期
        calendarDays.forEach(day => {
            day.addEventListener('click', function() {
                // 忽略其他月份的日期
                if (this.classList.contains('other-month')) return;
                
                // 獲取點擊的日期
                const year = document.getElementById('current-month').textContent.split('年')[0];
                const month = document.getElementById('current-month').textContent.split('年')[1].split('月')[0];
                const day = this.textContent;
                const dateString = `${year}/${month.padStart(2, '0')}/${day.padStart(2, '0')}`;
                
                // 更新日期選擇器視覺效果
                document.querySelectorAll('.calendar-day').forEach(d => {
                    d.classList.remove('active');
                });
                this.classList.add('active');
                
                // 更新模態框標題和日期
                document.getElementById('editModalTitle').textContent = this.classList.contains('has-data') ? '編輯記錄' : '新增記錄';
                document.getElementById('modalRecordDate').textContent = dateString;
                
                // 如果這一天有記錄，獲取記錄數據
                if (this.classList.contains('has-data')) {
                    const historyRecords = document.querySelectorAll(`.history-card[data-date="${dateString}"]`);
                    if (historyRecords.length > 0) {
                        const card = historyRecords[0];
                        currentEditingRecordId = card.dataset.recordId;
                        isNewRecord = false;
                        
                        const note = card.querySelector('.history-note').textContent.trim();
                        const mode = card.querySelector('.history-mode').textContent;
                        const controlText = card.querySelector('.stat-item:nth-child(1) span').textContent;
                        const control = parseInt(controlText.split(': ')[1]);
                        const durationText = card.querySelector('.stat-item:nth-child(2) span').textContent;
                        const duration = parseInt(durationText.split(': ')[1]);
                        
                        document.getElementById('modalRecordNote').value = note;
                        
                        // 設置練習模式
                        modeRadios.forEach(radio => {
                            if (radio.value === mode) {
                                radio.checked = true;
                            }
                        });
                        
                        // 設置控制度
                        anxietySlider.value = control;
                        anxietyValue.textContent = control;
                        focusSlider.value = control;
                        focusValue.textContent = control;
                        sleepSlider.value = control;
                        sleepValue.textContent = control;
                        
                        // 設置時長
                        if ([3, 5, 10, 15].includes(duration)) {
                            durationSelect.value = duration.toString();
                            customDurationContainer.style.display = 'none';
                        } else {
                            durationSelect.value = 'custom';
                            document.getElementById('custom-duration').value = duration;
                            customDurationContainer.style.display = 'block';
                        }
                    }
                } else {
                    // 如果這一天沒有記錄，設置為新建記錄
                    currentEditingRecordId = 'new_' + Date.now();
                    isNewRecord = true;
                    
                    // 重置表單為默認值
                    resetModalForm();
                }
                
                // 顯示模態框
                modal.style.display = 'flex';
            });
        });
        
        // 重置模態框表單
        function resetModalForm() {
            document.getElementById('modalRecordNote').value = '';
            anxietySlider.value = 5;
            anxietyValue.textContent = 5;
            focusSlider.value = 5;
            focusValue.textContent = 5;
            sleepSlider.value = 5;
            sleepValue.textContent = 5;
            durationSelect.value = '3';
            customDurationContainer.style.display = 'none';
            
            // 設置默認練習模式
            modeRadios[0].checked = true;
        }
        
        // 關閉模態框
        closeBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });
        
        cancelBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });
        
        // 點擊模態框外部關閉
        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
        
        // 滑桿值變化事件
        anxietySlider.addEventListener('input', function() {
            anxietyValue.textContent = this.value;
        });
        
        focusSlider.addEventListener('input', function() {
            focusValue.textContent = this.value;
        });
        
        sleepSlider.addEventListener('input', function() {
            sleepValue.textContent = this.value;
        });
        
        // 練習時長選擇變化事件
        durationSelect.addEventListener('change', function() {
            if (this.value === 'custom') {
                customDurationContainer.style.display = 'block';
            } else {
                customDurationContainer.style.display = 'none';
            }
        });
        
        // 儲存變更功能
        saveBtn.addEventListener('click', function() {
            // 獲取模態框中的所有數據
            const date = document.getElementById('modalRecordDate').textContent;
            const note = document.getElementById('modalRecordNote').value;
            const modeElement = document.querySelector('input[name="practiceMode"]:checked');
            const mode = modeElement ? modeElement.value : '氣定神閒模式';
            
            // 根據當前選中的模式獲取相應的控制度值
            let control;
            if (mode === '氣定神閒模式') {
                control = anxietySlider.value;
            } else if (mode === '專注平靜模式') {
                control = focusSlider.value;
            } else {
                control = sleepSlider.value;
            }
            
            // 獲取練習時長
            let duration;
            if (durationSelect.value === 'custom') {
                duration = document.getElementById('custom-duration').value || '3';
            } else {
                duration = durationSelect.value;
            }
            
            // 在實際應用中，這裡應該將數據保存到localStorage或通過API發送到服務器
            console.log('保存記錄：', {
                recordId: currentEditingRecordId,
                date,
                note,
                mode,
                control,
                duration,
                isNewRecord
            });
            
            // 更新或創建對應的歷史記錄卡片
            if (isNewRecord) {
                // 創建新的歷史卡片
                createNewHistoryCard(currentEditingRecordId, date, mode, control, duration, note);
            } else {
                // 更新現有卡片
                updateHistoryCard(currentEditingRecordId, date, mode, control, duration, note);
            }
            
            // 更新行事曆上對應日期的標記
            updateCalendarMarking(date);
            
            // 更新本週練習概覽中的資料
            updateWeeklyStats();
            
            // 更新今日打卡狀態
            updateTodayCheckinStatus(date);
            
            // 關閉模態框
            modal.style.display = 'none';
            
            // 顯示保存成功提示
            showToast('記錄已保存！');
        });
        
        // 創建新的歷史記錄卡片
        function createNewHistoryCard(recordId, date, mode, control, duration, note) {
            const historyCards = document.querySelector('.history-cards');
            const newCard = document.createElement('div');
            newCard.className = 'history-card';
            newCard.dataset.recordId = recordId;
            newCard.dataset.date = date;
            
            newCard.innerHTML = `
                <div class="history-card-header">
                    <div class="history-date">${date}</div>
                    <button class="edit-history-btn" aria-label="編輯此記錄">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                </div>
                <div class="history-mode">${mode}</div>
                <div class="history-stats">
                    <div class="stat-item">
                        <i class="fas fa-brain"></i>
                        <span>控制度: ${control}</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-clock"></i>
                        <span>時長: ${duration}分鐘</span>
                    </div>
                </div>
                <div class="history-note">
                    ${note}
                </div>
            `;
            
            // 將新卡片插入到歷史記錄區域的最前面
            if (historyCards.firstChild) {
                historyCards.insertBefore(newCard, historyCards.firstChild);
            } else {
                historyCards.appendChild(newCard);
            }
            
            // 為新卡片的編輯按鈕添加事件監聽器
            attachEditButtonEvents();
        }
        
        // 更新現有歷史記錄卡片
        function updateHistoryCard(recordId, date, mode, control, duration, note) {
            const card = document.querySelector(`.history-card[data-record-id="${recordId}"]`);
            if (card) {
                card.querySelector('.history-mode').textContent = mode;
                card.querySelector('.stat-item:nth-child(1) span').textContent = `控制度: ${control}`;
                card.querySelector('.stat-item:nth-child(2) span').textContent = `時長: ${duration}分鐘`;
                card.querySelector('.history-note').textContent = note;
            }
        }
        
        // 更新行事曆上的標記
        function updateCalendarMarking(date) {
            const dateParts = date.split('/');
            const year = dateParts[0];
            const month = dateParts[1];
            const day = parseInt(dateParts[2]);
            
            // 檢查當前顯示的月份是否與記錄的月份相同
            const currentMonthText = document.getElementById('current-month').textContent;
            const currentYear = currentMonthText.split('年')[0];
            const currentMonth = currentMonthText.split('年')[1].split('月')[0];
            
            if (year === currentYear && month === currentMonth) {
                // 找到對應的日期元素
                const dayElements = document.querySelectorAll('.calendar-day:not(.other-month)');
                dayElements.forEach(dayElement => {
                    if (parseInt(dayElement.textContent) === day) {
                        // 標記為有數據
                        dayElement.classList.add('has-data');
                    }
                });
            }
        }
        
        // 更新本週練習概覽
        function updateWeeklyStats() {
            // 在實際應用中，這裡應該從localStorage或API獲取最新的統計數據
            // 這裡僅作示例更新
            const practiceCount = document.querySelector('.stats-card:nth-child(1) .stats-value');
            const controlAvg = document.querySelector('.stats-card:nth-child(2) .stats-value');
            const streakDays = document.querySelector('.stats-card:nth-child(3) .stats-value');
            
            // 更新練習次數（這裡僅作示例，簡單 +1）
            let count = parseInt(practiceCount.textContent);
            practiceCount.textContent = (count + 1).toString();
            
            // 更新連續天數
            let streak = parseInt(streakDays.textContent);
            streakDays.textContent = (streak + 1).toString();
            
            // 更新目標進度條
            const goalBar = document.querySelector('.goal-bar');
            const newProgress = Math.min(100, (streak + 1) / 7 * 100);
            goalBar.style.width = `${newProgress}%`;
        }
        
        // 更新今日打卡狀態
        function updateTodayCheckinStatus(date) {
            const today = new Date();
            const todayString = `${today.getFullYear()}/${String(today.getMonth() + 1).padStart(2, '0')}/${String(today.getDate()).padStart(2, '0')}`;
            
            if (date === todayString) {
                const checkinIcon = document.querySelector('.checkin-icon');
                const checkinTitle = document.querySelector('.checkin-title');
                const checkinTime = document.querySelector('.checkin-time');
                
                // 更新為已完成狀態
                checkinIcon.className = 'checkin-icon completed';
                checkinIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
                checkinTitle.textContent = '今日已完成練習';
                
                // 更新完成時間
                const now = new Date();
                const hours = now.getHours().toString().padStart(2, '0');
                const minutes = now.getMinutes().toString().padStart(2, '0');
                checkinTime.textContent = `完成於 ${hours}:${minutes}`;
                
                // 更新連續練習天數
                const streakCount = document.querySelector('.streak-count');
                let days = parseInt(streakCount.textContent);
                streakCount.textContent = `${days + 1}天`;
            }
        }
        
        // 顯示提示訊息
        function showToast(message) {
            // 創建一個提示訊息元素
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            toast.style.position = 'fixed';
            toast.style.bottom = '80px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            toast.style.color = 'white';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '20px';
            toast.style.zIndex = '1000';
            toast.style.opacity = '0';
            toast.style.transition = 'opacity 0.3s ease';
            
            // 添加到頁面
            document.body.appendChild(toast);
            
            // 顯示提示
            setTimeout(() => { toast.style.opacity = '1'; }, 10);
            
            // 自動消失
            setTimeout(() => { 
                toast.style.opacity = '0'; 
                setTimeout(() => { document.body.removeChild(toast); }, 300);
            }, 2000);
        }
        
        // 月份導航功能
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');
        const currentMonthDisplay = document.getElementById('current-month');
        
        prevMonthBtn.addEventListener('click', function() {
            changeMonth(-1);
        });
        
        nextMonthBtn.addEventListener('click', function() {
            changeMonth(1);
        });
        
        function changeMonth(delta) {
            // 從當前顯示獲取年月
            const currentText = currentMonthDisplay.textContent;
            const year = parseInt(currentText.split('年')[0]);
            const month = parseInt(currentText.split('年')[1].split('月')[0]);
            
            // 計算新的年月
            let newMonth = month + delta;
            let newYear = year;
            
            if (newMonth > 12) {
                newMonth = 1;
                newYear += 1;
            } else if (newMonth < 1) {
                newMonth = 12;
                newYear -= 1;
            }
            
            // 更新顯示
            currentMonthDisplay.textContent = `${newYear}年${newMonth}月`;
            
            // 在實際應用中，這裡應該更新行事曆日期
            // 包括：更新天數、標記有記錄的日期等
            // 這需要從localStorage或API獲取該月的記錄數據
        }
    });
</script>
</body>
</html> 